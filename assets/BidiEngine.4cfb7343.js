const I=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xAB","\xBB"],["\xBB","\xAB"],["\u2039","\u203A"],["\u203A","\u2039"],["\u207D","\u207E"],["\u207E","\u207D"],["\u208D","\u208E"],["\u208E","\u208D"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232A"],["\u232A","\u2329"],["\uFE59","\uFE5A"],["\uFE5A","\uFE59"],["\uFE5B","\uFE5C"],["\uFE5C","\uFE5B"],["\uFE5D","\uFE5E"],["\uFE5E","\uFE5D"],["\uFE64","\uFE65"],["\uFE65","\uFE64"]],V=["\u0622","\u0623","\u0625","\u0627"],$=["\uFEF5","\uFEF7","\uFEF9","\uFEFB"],tt=["\uFEF6","\uFEF8","\uFEFA","\uFEFC"],k=["\u0627","\u0628","\u062A","\u062B","\u062C","\u062D","\u062E","\u062F","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063A","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u06CC","\u0626","\u0624"],rt=["\uFE8D","\uFE8F","\uFE95","\uFE99","\uFE9D","\uFEA1","\uFEA5","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB1","\uFEB5","\uFEB9","\uFEBD","\uFEC1","\uFEC5","\uFEC9","\uFECD","\uFED1","\uFED5","\uFED9","\uFEDD","\uFEE1","\uFEE5","\uFEE9","\uFEED","\uFEF1","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFC","\uFE89","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE89","\uFE85"],it=["\uFE8E","\uFE90","\uFE96","\uFE9A","\uFE9E","\uFEA2","\uFEA6","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB2","\uFEB6","\uFEBA","\uFEBE","\uFEC2","\uFEC6","\uFECA","\uFECE","\uFED2","\uFED6","\uFEDA","\uFEDE","\uFEE2","\uFEE6","\uFEEA","\uFEEE","\uFEF2","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFD","\uFE8A","\uFE86","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8A","\uFE86"],et=["\uFE8E","\uFE92","\uFE98","\uFE9C","\uFEA0","\uFEA4","\uFEA8","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB4","\uFEB8","\uFEBC","\uFEC0","\uFEC4","\uFEC8","\uFECC","\uFED0","\uFED4","\uFED8","\uFEDC","\uFEE0","\uFEE4","\uFEE8","\uFEEC","\uFEEE","\uFEF4","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFF","\uFE8C","\uFE86","\uFE71","\uFE72","\uFE74","\uFE77","\uFE79","\uFE7B","\uFE7D","\uFE7F","\uFE80","\uFE8C","\uFE86"],nt=["\uFE8D","\uFE91","\uFE97","\uFE9B","\uFE9F","\uFEA3","\uFEA7","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB3","\uFEB7","\uFEBB","\uFEBF","\uFEC3","\uFEC7","\uFECB","\uFECF","\uFED3","\uFED7","\uFEDB","\uFEDF","\uFEE3","\uFEE7","\uFEEB","\uFEED","\uFEF3","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFE","\uFE8B","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8B","\uFE85"],z=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062F","\u0630","\u0631","\u0632","\u0648","\u0649"],ut=["\u064B","\u064B","\u064C","\u061F","\u064D","\u061F","\u064E","\u064E","\u064F","\u064F","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062A","\u062A","\u062A","\u062A","\u062B","\u062B","\u062B","\u062B","\u062C","\u062C","\u062C","\u062C","\u062D","\u062D","\u062D","\u062D","\u062E","\u062E","\u062E","\u062E","\u062F","\u062F","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063A","\u063A","\u063A","\u063A","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064A","\u064A","\u064A","\u064A","\uFEF5","\uFEF6","\uFEF7","\uFEF8","\uFEF9","\uFEFA","\uFEFB","\uFEFC","\u061F","\u061F","\u061F"],q=["\u0621","\u0641"],st=["\u063A","\u064A"],at=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ot=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],i=0,a=1,h=2,B=3,t=4,_=5,j=6,r=7,m=8,R=9,b=10,T=11,e=12,ft=13,ct=14,lt=15,ht=16,Tt=17,l=18,At=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],p=100,Lt=[p+0,i,i,i,i,p+1,p+2,p+3,a,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,p+4,t,t,t,i,t,i,t,i,t,t,t,i,i,t,t,i,i,i,i,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,i,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,i,i,t,t,i,i,t,t,i,i,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,i,i,i,p+5,r,r,p+6,p+7],gt=[[l,l,l,l,l,l,l,l,l,j,_,j,m,_,l,l,l,l,l,l,l,l,l,l,l,l,l,l,_,_,_,j,m,t,t,T,T,T,t,t,t,t,t,b,R,b,R,R,h,h,h,h,h,h,h,h,h,h,R,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,l,l,l,l,l,l,_,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,R,t,T,T,T,T,t,t,t,t,i,t,t,l,t,t,T,T,h,h,t,i,t,t,t,h,i,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,i,i,i,i,i,i,i,i],[i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,i,i,i,i,i,i,i,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,i,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,a,e,a,e,e,a,e,e,a,e,t,t,t,t,t,t,t,t,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,t,t,t,t,t,a,a,a,a,a,t,t,t,t,t,t,t,t,t,t,t],[B,B,B,B,t,t,t,t,r,T,T,r,R,r,t,t,e,e,e,e,e,e,e,e,e,e,e,r,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,B,B,B,B,B,B,B,B,B,B,T,B,B,r,r,r,e,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,e,e,e,e,e,e,e,B,t,e,e,e,e,e,e,r,r,e,e,t,e,e,e,e,r,r,h,h,h,h,h,h,h,h,h,h,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,r,e,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,e,e,e,e,e,e,e,e,e,e,e,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,a,a,t,t,t,t,a,t,t,t,t,t],[m,m,m,m,m,m,m,m,m,m,m,l,l,l,i,a,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,_,ft,ct,lt,ht,Tt,R,T,T,T,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,R,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,l,l,l,l,l,t,t,t,t,t,l,l,l,l,l,l,h,i,t,t,h,h,h,h,h,h,b,b,t,t,t,i,h,h,h,h,h,h,h,h,h,h,b,b,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[i,i,i,i,i,i,i,t,t,t,t,t,t,t,t,t,t,t,t,i,i,i,i,i,t,t,t,t,t,a,e,a,a,a,a,a,a,a,a,a,a,b,a,a,a,a,a,a,a,a,a,a,a,a,a,t,a,a,a,a,a,t,a,t,a,a,t,a,a,t,a,a,a,a,a,a,a,a,a,a,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,R,t,R,t,t,R,t,t,t,t,t,t,t,t,t,T,t,t,b,b,t,t,t,t,t,T,T,t,t,t,t,t,r,r,r,r,r,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,l],[t,t,t,T,T,T,t,t,t,t,t,b,R,b,R,R,h,h,h,h,h,h,h,h,h,h,R,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,t,t,t,t,t,t,t,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,t,t,t,i,i,i,i,i,i,t,t,i,i,i,i,i,i,t,t,i,i,i,i,i,i,t,t,i,i,i,t,t,t,T,T,t,t,t,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]];class Pt{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(n,s,o){if(this.sourceToTarget=[],this.targetToSource=[],!n)return"";if(Ot(this.sourceToTarget,this.targetToSource,n.length),!this.checkParameters(s,o))return n;s=this.inputFormat,o=this.outputFormat;let f=n;const c=It,L=H(s.charAt(1)),A=H(o.charAt(1)),g=(s.charAt(0)==="I"?"L":s.charAt(0))+L,d=(o.charAt(0)==="I"?"L":o.charAt(0))+A,U=s.charAt(2)+o.charAt(2);c.defInFormat=g,c.defOutFormat=d,c.defSwap=U;const w=E(n,g,d,U,c);let N=!1;return o.charAt(1)==="R"?N=!0:o.charAt(1)!=="C"&&o.charAt(1)!=="D"||(N=this.checkContextual(w)==="rtl"),this.sourceToTarget=F,this.targetToSource=xt(this.sourceToTarget),P=this.targetToSource,f=s.charAt(3)===o.charAt(3)?w:o.charAt(3)==="S"?Bt(N,w,!0):Rt(w,N,!0),this.sourceToTarget=F,this.targetToSource=P,this.levels=y,f}_inputFormatSetter(n){if(!J.test(n))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=n}_outputFormatSetter(n){if(!J.test(n))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=n}checkParameters(n,s){return n?this._inputFormatSetter(n):n=this.inputFormat,s?this._outputFormatSetter(s):s=this.outputFormat,n!==s}checkContextual(n){let s=D(n);if(s!=="ltr"&&s!=="rtl"){try{s=document.dir.toLowerCase()}catch{}s!=="ltr"&&s!=="rtl"&&(s="ltr")}return s}hasBidiChar(n){return Dt.test(n)}}function E(u,n,s,o,f){const c=dt(u,{inFormat:n,outFormat:s,swap:o},f);if(c.inFormat===c.outFormat)return u;n=c.inFormat,s=c.outFormat,o=c.swap;const L=n.substring(0,1),A=n.substring(1,4),g=s.substring(0,1),d=s.substring(1,4);if(f.inFormat=n,f.outFormat=s,f.swap=o,L==="L"&&s==="VLTR"){if(A==="LTR")return f.dir=C,S(u,f);if(A==="RTL")return f.dir=O,S(u,f)}if(L==="V"&&g==="V")return f.dir=A==="RTL"?O:C,Y(u,f);if(L==="L"&&s==="VRTL")return A==="LTR"?(f.dir=C,u=S(u,f)):(f.dir=O,u=S(u,f)),Y(u);if(n==="VLTR"&&s==="LLTR")return f.dir=C,S(u,f);if(L==="V"&&g==="L"&&A!==d)return u=Y(u),A==="RTL"?E(u,"LLTR","VLTR",o,f):E(u,"LRTL","VRTL",o,f);if(n==="VRTL"&&s==="LRTL")return E(u,"LRTL","VRTL",o,f);if(L==="L"&&g==="L"){const U=f.swap;return f.swap=U.substr(0,1)+"N",A==="RTL"?(f.dir=O,u=S(u,f),f.swap="N"+U.substr(1,2),f.dir=C,u=S(u,f)):(f.dir=C,u=S(u,f),f.swap="N"+U.substr(1,2),u=E(u,"VLTR","LRTL",f.swap,f)),u}return u}function dt(u,n,s){if(n.inFormat===void 0&&(n.inFormat=s.defInFormat),n.outFormat===void 0&&(n.outFormat=s.defOutFormat),n.swap===void 0&&(n.swap=s.defSwap),n.inFormat===n.outFormat)return n;const o=n.inFormat.substring(0,1),f=n.outFormat.substring(0,1);let c,L=n.inFormat.substring(1,4),A=n.outFormat.substring(1,4);return L.charAt(0)==="C"&&(c=D(u),L=c==="ltr"||c==="rtl"?c.toUpperCase():n.inFormat.charAt(2)==="L"?"LTR":"RTL",n.inFormat=o+L),A.charAt(0)==="C"&&(c=D(u),c==="rtl"?A="RTL":c==="ltr"?(c=mt(u),A=c.toUpperCase()):A=n.outFormat.charAt(2)==="L"?"LTR":"RTL",n.outFormat=f+A),n}function Bt(u,n,s){if(n.length===0)return"";u===void 0&&(u=!0),s===void 0&&(s=!0);const o=(n=String(n)).split("");let f=0,c=1,L=o.length;u||(f=o.length-1,c=-1,L=1);const A=Ut(o,f,c,L,s);let g="";for(let d=0;d<o.length;d++)s&&_t(A,A.length,d)>-1?(X(P,d,!u,-1),F.splice(d,1)):g+=o[d];return g}function Ut(u,n,s,o,f){let c=0;const L=[];let A=0;for(let g=n;g*s<o;g+=s)if(Q(u[g])||x(u[g])){if(u[g]==="\u0644"&&St(u,g+s,s,o)){u[g]=Et(u[g+s],c===0?$:tt),g+=s,Vt(u,g,s,o),f&&(L[A]=g,A++),c=0;continue}const d=u[g];c===1?u[g]=Z(u,g+s,s,o)?Ct(u[g]):W(u[g],it):Z(u,g+s,s,o)===!0?u[g]=W(u[g],nt):u[g]=W(u[g],rt),x(d)||(c=1),vt(d)===!0&&(c=0)}else c=0;return L}function D(u){const n=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(u);return n?n[0]<="z"?"ltr":"rtl":""}function mt(u){const n=u.split("");return n.reverse(),D(n.join(""))}function Rt(u,n,s){if(u.length===0)return"";s===void 0&&(s=!0),n===void 0&&(n=!0);let o="";const f=(u=String(u)).split("");for(let c=0;c<u.length;c++){let L=!1;if(f[c]>="\uFE70"&&f[c]<"\uFEFF"){const A=u.charCodeAt(c);f[c]>="\uFEF5"&&f[c]<="\uFEFC"?(n?(c>0&&s&&f[c-1]===" "?o=o.substring(0,o.length-1)+"\u0644":(o+="\u0644",L=!0),o+=V[(A-65269)/2]):(o+=V[(A-65269)/2],o+="\u0644",c+1<u.length&&s&&f[c+1]===" "?c++:L=!0),L&&(X(P,c,!0,1),F.splice(c,0,F[c]))):o+=ut[A-65136]}else o+=f[c]}return o}function S(u,n){const s=u.split(""),o=[];return K(s,o,n),bt(s,o,n),G(2,s,o,n),G(1,s,o,n),y=o,s.join("")}function K(u,n,s){const o=u.length,f=s.dir?ot:at;let c=0,L=-1;const A=[],g=[];s.hiLevel=s.dir,s.lastArabic=!1,s.hasUbatAl=!1,s.hasUbatB=!1,s.hasUbatS=!1;for(let d=0;d<o;d++)A[d]=pt(u[d]);for(let d=0;d<o;d++){const U=c,w=wt(u,A,g,d,s);g[d]=w,c=f[U][w];const N=240&c;c&=15;const M=f[c][jt];if(n[d]=M,N>0)if(N===16){for(let v=L;v<d;v++)n[v]=1;L=-1}else L=-1;if(f[c][kt])L===-1&&(L=d);else if(L>-1){for(let v=L;v<d;v++)n[v]=M;L=-1}A[d]===_&&(n[d]=0),s.hiLevel|=M}s.hasUbatS&&Ft(A,n,o,s)}function Ft(u,n,s,o){for(let f=0;f<s;f++)if(u[f]===j){n[f]=o.dir;for(let c=f-1;c>=0&&u[c]===m;c--)n[c]=o.dir}}function bt(u,n,s){if(s.hiLevel!==0&&s.swap.substr(0,1)!==s.swap.substr(1,2))for(let o=0;o<u.length;o++)n[o]===1&&(u[o]=Nt(u[o]))}function pt(u){const n=u.charCodeAt(0),s=Lt[n>>8];return s<p?s:gt[s-p][255&n]}function Y(u,n){const s=u.split("");if(n){const o=[];K(s,o,n),y=o}return s.reverse(),F.reverse(),s.join("")}function _t(u,n,s){for(let o=0;o<n;o++)if(u[o]===s)return o;return-1}function Q(u){for(let n=0;n<q.length;n++)if(u>=q[n]&&u<=st[n])return!0;return!1}function Z(u,n,s,o){for(;n*s<o&&x(u[n]);)n+=s;return!!(n*s<o&&Q(u[n]))}function St(u,n,s,o){for(;n*s<o&&x(u[n]);)n+=s;let f=" ";if(!(n*s<o))return!1;f=u[n];for(let c=0;c<V.length;c++)if(V[c]===f)return!0;return!1}function G(u,n,s,o){if(o.hiLevel<u)return;if(u===1&&o.dir===O&&!o.hasUbatB)return n.reverse(),void F.reverse();const f=n.length;let c,L,A,g,d,U=0;for(;U<f;){if(s[U]>=u){for(c=U+1;c<f&&s[c]>=u;)c++;for(L=U,A=c-1;L<A;L++,A--)g=n[L],n[L]=n[A],n[A]=g,d=F[L],F[L]=F[A],F[A]=d;U=c}U++}}function wt(u,n,s,o,f){const c=n[o];return{UBAT_L:()=>(f.lastArabic=!1,i),UBAT_R:()=>(f.lastArabic=!1,a),UBAT_ON:()=>t,UBAT_AN:()=>B,UBAT_EN:()=>f.lastArabic?B:h,UBAT_AL:()=>(f.lastArabic=!0,f.hasUbatAl=!0,a),UBAT_WS:()=>t,UBAT_CS:()=>{let L,A;return o<1||o+1>=n.length||(L=s[o-1])!==h&&L!==B||(A=n[o+1])!==h&&A!==B?t:(f.lastArabic&&(A=B),A===L?A:t)},UBAT_ES:()=>(o>0?s[o-1]:_)===h&&o+1<n.length&&n[o+1]===h?h:t,UBAT_ET:()=>{if(o>0&&s[o-1]===h)return h;if(f.lastArabic)return t;let L=o+1;const A=n.length;for(;L<A&&n[L]===T;)L++;return L<A&&n[L]===h?h:t},UBAT_NSM:()=>{if(f.inFormat==="VLTR"){const L=n.length;let A=o+1;for(;A<L&&n[A]===e;)A++;if(A<L){const g=u[o].charCodeAt[0],d=g>=1425&&g<=2303||g===64286,U=n[A];if(d&&(U===a||U===r))return a}}return o<1||n[o-1]===_?t:s[o-1]},UBAT_B:()=>(f.lastArabic=!0,f.hasUbatB=!0,f.dir),UBAT_S:()=>(f.hasUbatS=!0,t),UBAT_LRE:()=>(f.lastArabic=!1,t),UBAT_RLE:()=>(f.lastArabic=!1,t),UBAT_LRO:()=>(f.lastArabic=!1,t),UBAT_RLO:()=>(f.lastArabic=!1,t),UBAT_PDF:()=>(f.lastArabic=!1,t),UBAT_BN:()=>t}[At[c]]()}function Nt(u){let n,s=0,o=I.length-1;for(;s<=o;)if(n=Math.floor((s+o)/2),u<I[n][0])o=n-1;else{if(!(u>I[n][0]))return I[n][1];s=n+1}return u}function vt(u){for(let n=0;n<z.length;n++)if(z[n]===u)return!0;return!1}function Ct(u){for(let n=0;n<k.length;n++)if(u===k[n])return et[n];return u}function W(u,n){for(let s=0;s<k.length;s++)if(u===k[s])return n[s];return u}function x(u){return u>="\u064B"&&u<="\u0655"}function H(u){return u==="L"?"LTR":u==="R"?"RTL":u==="C"?"CLR":u==="D"?"CRL":""}function Vt(u,n,s,o){for(;n*s<o&&x(u[n]);)n+=s;return n*s<o&&(u[n]=" ",!0)}function Et(u,n){for(let s=0;s<V.length;s++)if(u===V[s])return n[s];return u}function Ot(u,n,s){F=[],y=[];for(let o=0;o<s;o++)u[o]=o,n[o]=o,F[o]=o}function xt(u){const n=new Array(u.length);for(let s=0;s<u.length;s++)n[u[s]]=s;return n}function X(u,n,s,o){for(let f=0;f<u.length;f++)(u[f]>n||!s&&u[f]===n)&&(u[f]+=o)}let F=[],P=[],y=[];const It={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},jt=5,kt=6,C=0,O=1,J=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Dt=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{Pt as C};
