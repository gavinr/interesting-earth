function P(n,r){return n?r?4:3:r?3:2}function M(n,r,u,l,s){if(r==null||!r.lengths.length)return null;const o=(s==null?void 0:s.originPosition)==="upperLeft"?-1:1;n.lengths.length&&(n.lengths.length=0),n.coords.length&&(n.coords.length=0);const I=n.coords,N=[],t=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:g}=r,F=P(u,l);let m=0;for(const e of T){const c=O(t,g,m,e,u,l,o);c&&N.push(c),m+=e*F}if(N.sort((e,c)=>{let i=o*e[2]-o*c[2];return i===0&&u&&(i=e[4]-c[4]),i}),N.length){let e=6*N[0][2];I[0]=N[0][0]/e,I[1]=N[0][1]/e,u&&(e=6*N[0][4],I[2]=e!==0?N[0][3]/e:0),(I[0]<t[0]||I[0]>t[1]||I[1]<t[2]||I[1]>t[3]||u&&(I[2]<t[4]||I[2]>t[5]))&&(I.length=0)}if(!I.length){const e=r.lengths[0]?S(g,0,T[0],u,l):null;if(!e)return null;I[0]=e[0],I[1]=e[1],u&&e.length>2&&(I[2]=e[2])}return n}function O(n,r,u,l,s,o,I=1){const N=P(s,o);let t=u,T=u+N,g=0,F=0,m=0,e=0,c=0;for(let _=0,V=l-1;_<V;_++,t+=N,T+=N){const h=r[t],b=r[t+1],f=r[t+2],E=r[T],A=r[T+1],G=r[T+2];let Y=h*A-E*b;e+=Y,g+=(h+E)*Y,F+=(b+A)*Y,s&&(Y=h*G-E*f,m+=(f+G)*Y,c+=Y),h<n[0]&&(n[0]=h),h>n[1]&&(n[1]=h),b<n[2]&&(n[2]=b),b>n[3]&&(n[3]=b),s&&(f<n[4]&&(n[4]=f),f>n[5]&&(n[5]=f))}if(e*I>0&&(e*=-1),c*I>0&&(c*=-1),!e)return null;const i=[g,F,.5*e];return s&&(i[3]=m,i[4]=.5*c),i}function S(n,r,u,l,s){const o=P(l,s);let I=r,N=r+o,t=0,T=0,g=0,F=0;for(let m=0,e=u-1;m<e;m++,I+=o,N+=o){const c=n[I],i=n[I+1],_=n[I+2],V=n[N],h=n[N+1],b=n[N+2],f=l?p(c,i,_,V,h,b):d(c,i,V,h);if(f)if(t+=f,l){const E=q(c,i,_,V,h,b);T+=f*E[0],g+=f*E[1],F+=f*E[2]}else{const E=a(c,i,V,h);T+=f*E[0],g+=f*E[1]}}return t>0?l?[T/t,g/t,F/t]:[T/t,g/t]:u>0?l?[n[r],n[r+1],n[r+2]]:[n[r],n[r+1]]:null}function d(n,r,u,l){const s=u-n,o=l-r;return Math.sqrt(s*s+o*o)}function p(n,r,u,l,s,o){const I=l-n,N=s-r,t=o-u;return Math.sqrt(I*I+N*N+t*t)}function a(n,r,u,l){return[n+.5*(u-n),r+.5*(l-r)]}function q(n,r,u,l,s,o){return[n+.5*(l-n),r+.5*(s-r),u+.5*(o-u)]}export{M as t};
